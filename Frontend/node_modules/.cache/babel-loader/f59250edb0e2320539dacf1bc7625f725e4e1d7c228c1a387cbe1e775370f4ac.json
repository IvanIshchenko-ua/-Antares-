{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useParams}from'react-router-dom';import{contentService}from'../../services/contentService';import RichTextEditor from'./RichTextEditor';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const PageEditor=()=>{const{pageName}=useParams();const[content,setContent]=useState('');const[loading,setLoading]=useState(false);const[saved,setSaved]=useState(true);const editorRef=useRef(null);useEffect(()=>{loadContent();},[pageName]);const loadContent=async()=>{try{const response=await contentService.getContent(pageName);setContent(response.data.content||'');setSaved(true);}catch(error){console.error('Помилка завантаження контенту:',error);// Якщо сторінки немає, створюємо порожній контент\nsetContent('');}};const handleContentChange=newContent=>{setContent(newContent);setSaved(false);};const saveContent=async()=>{setLoading(true);try{await contentService.updateContent(pageName,content);setSaved(true);alert('Контент збережено успішно!');}catch(error){console.error('Помилка збереження:',error);alert('Помилка збереження контенту');}finally{setLoading(false);}};const handleEditorInit=(evt,editor)=>{editorRef.current=editor;};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold\",children:[\"\\u0420\\u0435\\u0434\\u0430\\u0433\\u0443\\u0432\\u0430\\u043D\\u043D\\u044F: \",pageName]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4 mt-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-sm \".concat(saved?'bg-green-100 text-green-800':'bg-yellow-100 text-yellow-800'),children:saved?'✓ Збережено':'● Не збережено'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.history.back(),className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveContent,disabled:loading||saved,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-400\",children:loading?'Збереження...':'Зберегти'})]})]}),/*#__PURE__*/_jsx(RichTextEditor,{value:content,onChange:handleContentChange,onInit:handleEditorInit}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setContent(content+'<p>Новий абзац</p>'),className:\"bg-green-500 text-white px-3 py-1 rounded text-sm\",children:\"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u0430\\u0431\\u0437\\u0430\\u0446\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setContent(content+'<h2>Новий заголовок</h2>'),className:\"bg-purple-500 text-white px-3 py-1 rounded text-sm\",children:\"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u0437\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"})]})]});};export default PageEditor;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","contentService","RichTextEditor","jsxs","_jsxs","jsx","_jsx","PageEditor","pageName","content","setContent","loading","setLoading","saved","setSaved","editorRef","loadContent","response","getContent","data","error","console","handleContentChange","newContent","saveContent","updateContent","alert","handleEditorInit","evt","editor","current","className","children","concat","onClick","window","history","back","disabled","value","onChange","onInit"],"sources":["/Users/ivanisenko/Desktop/Narnia/робота/Не закінчені проекти/Мама проект школа/-Antares-/Frontend/src/components/editor/Editor.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { contentService } from '../../services/contentService';\nimport RichTextEditor from './RichTextEditor';\n\nconst PageEditor = () => {\n  const { pageName } = useParams();\n  const [content, setContent] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [saved, setSaved] = useState(true);\n  const editorRef = useRef(null);\n\n  useEffect(() => {\n    loadContent();\n  }, [pageName]);\n\n  const loadContent = async () => {\n    try {\n      const response = await contentService.getContent(pageName);\n      setContent(response.data.content || '');\n      setSaved(true);\n    } catch (error) {\n      console.error('Помилка завантаження контенту:', error);\n      // Якщо сторінки немає, створюємо порожній контент\n      setContent('');\n    }\n  };\n\n  const handleContentChange = (newContent) => {\n    setContent(newContent);\n    setSaved(false);\n  };\n\n  const saveContent = async () => {\n    setLoading(true);\n    try {\n      await contentService.updateContent(pageName, content);\n      setSaved(true);\n      alert('Контент збережено успішно!');\n    } catch (error) {\n      console.error('Помилка збереження:', error);\n      alert('Помилка збереження контенту');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditorInit = (evt, editor) => {\n    editorRef.current = editor;\n  };\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"flex justify-between items-center mb-4\">\n        <div>\n          <h1 className=\"text-2xl font-bold\">Редагування: {pageName}</h1>\n          <div className=\"flex items-center space-x-4 mt-2\">\n            <span className={`px-2 py-1 rounded text-sm ${\n              saved ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\n            }`}>\n              {saved ? '✓ Збережено' : '● Не збережено'}\n            </span>\n          </div>\n        </div>\n        \n        <div className=\"space-x-2\">\n          <button\n            onClick={() => window.history.back()}\n            className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n          >\n            Назад\n          </button>\n          <button\n            onClick={saveContent}\n            disabled={loading || saved}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-400\"\n          >\n            {loading ? 'Збереження...' : 'Зберегти'}\n          </button>\n        </div>\n      </div>\n      \n      <RichTextEditor\n        value={content}\n        onChange={handleContentChange}\n        onInit={handleEditorInit}\n      />\n      \n      {/* Кнопки швидкого доступу */}\n      <div className=\"mt-4 flex space-x-2\">\n        <button\n          onClick={() => setContent(content + '<p>Новий абзац</p>')}\n          className=\"bg-green-500 text-white px-3 py-1 rounded text-sm\"\n        >\n          Додати абзац\n        </button>\n        <button\n          onClick={() => setContent(content + '<h2>Новий заголовок</h2>')}\n          className=\"bg-purple-500 text-white px-3 py-1 rounded text-sm\"\n        >\n          Додати заголовок\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default PageEditor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}