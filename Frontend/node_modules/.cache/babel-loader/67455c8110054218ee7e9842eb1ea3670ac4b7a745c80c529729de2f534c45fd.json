{"ast":null,"code":"import api from'./api';const galleryService={// –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ —Ñ–æ—Ç–æ –≥–∞–ª–µ—Ä–µ—ó\ngetGalleryImages:async()=>{try{console.log('üîß Making GET request to /gallery');const response=await api.get('/gallery');console.log('üîß GET /gallery response:',response.data);return response.data;}catch(error){console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ñ–æ—Ç–æ:',error);return{images:[]};}},// –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–æ–≤–µ —Ñ–æ—Ç–æ –≤ R2\nuploadGalleryImage:async formData=>{try{console.log('üîß Starting R2 upload process...');// 1. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ñ–∞–π–ª –≤ R2\nconsole.log('üîß Step 1: Uploading file to R2');const uploadResponse=await api.post('/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});console.log('üîß R2 upload response:',uploadResponse.data);if(!uploadResponse.data.success){throw new Error('R2 upload failed');}// 2. –°—Ç–≤–æ—Ä—é—î–º–æ –∑–∞–ø–∏—Å –≤ –≥–∞–ª–µ—Ä–µ—ó\nconsole.log('üîß Step 2: Creating gallery record');const imageData={title:formData.get('title'),description:formData.get('description'),image_url:uploadResponse.data.url,category:formData.get('category'),filename:uploadResponse.data.filename// –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —ñ–º'—è —Ñ–∞–π–ª—É –¥–ª—è –º–æ–∂–ª–∏–≤–æ–≥–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è\n};console.log('üîß Gallery data to send:',imageData);const galleryResponse=await api.post('/gallery',imageData);console.log('üîß Gallery creation response:',galleryResponse.data);return galleryResponse.data;}catch(error){console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ R2:',error);throw error;}},// –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è\ncreateGalleryImage:async imageData=>{try{console.log('üîß Creating gallery image from URL:',imageData);const response=await api.post('/gallery',imageData);console.log('üîß Gallery creation response:',response.data);return response.data;}catch(error){console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–æ—Ç–æ –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:',error);throw error;}},// –í–∏–¥–∞–ª–∏—Ç–∏ —Ñ–æ—Ç–æ (–∑ R2 —Ç–∞ –∑ –±–∞–∑–∏)\ndeleteGalleryImage:async function(imageId){let filename=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;try{// –°–ø–æ—á–∞—Ç–∫—É –≤–∏–¥–∞–ª—è—î–º–æ –∑ –±–∞–∑–∏\nconst response=await api.delete(\"/gallery/\".concat(imageId));// –Ø–∫—â–æ —î filename, –≤–∏–¥–∞–ª—è—î–º–æ —Ñ–∞–π–ª –∑ R2\nif(filename){try{await api.delete(\"/upload/\".concat(filename));console.log('‚úÖ File deleted from R2:',filename);}catch(r2Error){console.error('‚ùå Error deleting from R2:',r2Error);// –ü—Ä–æ–¥–æ–≤–∂—É—î–º–æ, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –Ω–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–¥–∞–ª–∏—Ç–∏ –∑ R2\n}}return response.data;}catch(error){console.error('–ü–æ–º–∏–ª–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–æ—Ç–æ:',error);throw error;}}};export default galleryService;","map":{"version":3,"names":["api","galleryService","getGalleryImages","console","log","response","get","data","error","images","uploadGalleryImage","formData","uploadResponse","post","headers","success","Error","imageData","title","description","image_url","url","category","filename","galleryResponse","createGalleryImage","deleteGalleryImage","imageId","arguments","length","undefined","delete","concat","r2Error"],"sources":["/Users/ivanisenko/Desktop/Narnia/—Ä–æ–±–æ—Ç–∞/–ù–µ –∑–∞–∫—ñ–Ω—á–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç–∏/–ú–∞–º–∞ –ø—Ä–æ–µ–∫—Ç —à–∫–æ–ª–∞/-Antares-/Frontend/src/services/galleryService.js"],"sourcesContent":["import api from './api';\n\nconst galleryService = {\n  // –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ —Ñ–æ—Ç–æ –≥–∞–ª–µ—Ä–µ—ó\n  getGalleryImages: async () => {\n    try {\n      console.log('üîß Making GET request to /gallery');\n      const response = await api.get('/gallery');\n      console.log('üîß GET /gallery response:', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ñ–æ—Ç–æ:', error);\n      return { images: [] };\n    }\n  },\n\n  // –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–æ–≤–µ —Ñ–æ—Ç–æ –≤ R2\n  uploadGalleryImage: async (formData) => {\n    try {\n      console.log('üîß Starting R2 upload process...');\n      \n      // 1. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ñ–∞–π–ª –≤ R2\n      console.log('üîß Step 1: Uploading file to R2');\n      const uploadResponse = await api.post('/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      console.log('üîß R2 upload response:', uploadResponse.data);\n\n      if (!uploadResponse.data.success) {\n        throw new Error('R2 upload failed');\n      }\n\n      // 2. –°—Ç–≤–æ—Ä—é—î–º–æ –∑–∞–ø–∏—Å –≤ –≥–∞–ª–µ—Ä–µ—ó\n      console.log('üîß Step 2: Creating gallery record');\n      const imageData = {\n        title: formData.get('title'),\n        description: formData.get('description'),\n        image_url: uploadResponse.data.url,\n        category: formData.get('category'),\n        filename: uploadResponse.data.filename // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —ñ–º'—è —Ñ–∞–π–ª—É –¥–ª—è –º–æ–∂–ª–∏–≤–æ–≥–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è\n      };\n\n      console.log('üîß Gallery data to send:', imageData);\n      \n      const galleryResponse = await api.post('/gallery', imageData);\n      console.log('üîß Gallery creation response:', galleryResponse.data);\n      \n      return galleryResponse.data;\n    } catch (error) {\n      console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ R2:', error);\n      throw error;\n    }\n  },\n\n  // –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è\n  createGalleryImage: async (imageData) => {\n    try {\n      console.log('üîß Creating gallery image from URL:', imageData);\n      const response = await api.post('/gallery', imageData);\n      console.log('üîß Gallery creation response:', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–æ—Ç–æ –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:', error);\n      throw error;\n    }\n  },\n\n  // –í–∏–¥–∞–ª–∏—Ç–∏ —Ñ–æ—Ç–æ (–∑ R2 —Ç–∞ –∑ –±–∞–∑–∏)\n  deleteGalleryImage: async (imageId, filename = null) => {\n    try {\n      // –°–ø–æ—á–∞—Ç–∫—É –≤–∏–¥–∞–ª—è—î–º–æ –∑ –±–∞–∑–∏\n      const response = await api.delete(`/gallery/${imageId}`);\n      \n      // –Ø–∫—â–æ —î filename, –≤–∏–¥–∞–ª—è—î–º–æ —Ñ–∞–π–ª –∑ R2\n      if (filename) {\n        try {\n          await api.delete(`/upload/${filename}`);\n          console.log('‚úÖ File deleted from R2:', filename);\n        } catch (r2Error) {\n          console.error('‚ùå Error deleting from R2:', r2Error);\n          // –ü—Ä–æ–¥–æ–≤–∂—É—î–º–æ, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –Ω–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–¥–∞–ª–∏—Ç–∏ –∑ R2\n        }\n      }\n      \n      return response.data;\n    } catch (error) {\n      console.error('–ü–æ–º–∏–ª–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–æ—Ç–æ:', error);\n      throw error;\n    }\n  }\n};\n\nexport default galleryService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}