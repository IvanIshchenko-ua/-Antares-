{"ast":null,"code":"import _objectSpread from\"/Users/ivanisenko/Desktop/Narnia/\\u0440\\u043E\\u0431\\u043E\\u0442\\u0430/\\u041D\\u0435 \\u0437\\u0430\\u043A\\u0456\\u043D\\u0447\\u0435\\u043D\\u0456 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0438/\\u041C\\u0430\\u043C\\u0430 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442 \\u0448\\u043A\\u043E\\u043B\\u0430/-Antares-/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import EditableElement from'./EditableElement';import EditorToolbar from'./EditorToolbar';import ImageUploader from'./ImageUploader';import{contentService}from'../../services/contentService';import'./VisualEditor.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VisualEditor=()=>{const{pageName}=useParams();const navigate=useNavigate();const[pageData,setPageData]=useState(null);const[editingElement,setEditingElement]=useState(null);const[isEditMode,setIsEditMode]=useState(true);const[loading,setLoading]=useState(false);const[showImageUploader,setShowImageUploader]=useState(false);useEffect(()=>{loadPageData();},[pageName]);const loadPageData=async()=>{try{const response=await contentService.getContent(pageName);if(response.data){// Якщо дані вже є\nif(typeof response.data.content==='string'){setPageData({title:pageName,content:response.data.content});}else{setPageData(response.data);}}else{// Створюємо шаблон\nsetPageData({title:pageName,content:\"<h1>\\u0421\\u0442\\u043E\\u0440\\u0456\\u043D\\u043A\\u0430 \".concat(pageName,\"</h1><p>\\u041F\\u043E\\u0447\\u0430\\u0442\\u043E\\u043A \\u0440\\u0435\\u0434\\u0430\\u0433\\u0443\\u0432\\u0430\\u043D\\u043D\\u044F...</p>\")});}}catch(error){console.error('Помилка завантаження:',error);setPageData({title:pageName,content:\"<h1>\\u0421\\u0442\\u043E\\u0440\\u0456\\u043D\\u043A\\u0430 \".concat(pageName,\"</h1><p>\\u041F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430 \\u0437\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F. \\u0421\\u0442\\u0432\\u043E\\u0440\\u044E\\u0454\\u043C\\u043E \\u043D\\u043E\\u0432\\u0443 \\u0441\\u0442\\u043E\\u0440\\u0456\\u043D\\u043A\\u0443...</p>\")});}};const handleElementClick=elementId=>{if(isEditMode){setEditingElement(elementId);}};const handleContentUpdate=(elementId,newContent)=>{setPageData(prev=>_objectSpread(_objectSpread({},prev),{},{content:newContent}));setEditingElement(null);};const handleImageInsert=imageHtml=>{// Додаємо HTML зображення до контенту\nsetPageData(prev=>_objectSpread(_objectSpread({},prev),{},{content:prev.content+imageHtml}));setShowImageUploader(false);};const savePage=async()=>{if(!pageData)return;setLoading(true);try{await contentService.updateContent(pageName,pageData);alert('Сторінку збережено!');}catch(error){console.error('Помилка збереження:',error);alert('Помилка збереження сторінки');}finally{setLoading(false);}};if(!pageData){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"visual-editor \".concat(isEditMode?'edit-mode':'preview-mode'),children:[/*#__PURE__*/_jsx(EditorToolbar,{isEditMode:isEditMode,onToggleEditMode:()=>setIsEditMode(!isEditMode),onSave:savePage,onExit:()=>navigate('/admin/dashboard'),onAddImage:()=>setShowImageUploader(true),loading:loading}),showImageUploader&&/*#__PURE__*/_jsx(ImageUploader,{onInsert:handleImageInsert,onClose:()=>setShowImageUploader(false)}),/*#__PURE__*/_jsx(\"div\",{className:\"editor-container\",children:/*#__PURE__*/_jsx(EditableElement,{elementId:\"page-content\",content:pageData.content,isEditing:editingElement==='page-content',onEditStart:()=>handleElementClick('page-content'),onSave:content=>handleContentUpdate('page-content',content),onCancel:()=>setEditingElement(null),tag:\"div\",className:\"page-content-editor\"})})]});};export default VisualEditor;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","EditableElement","EditorToolbar","ImageUploader","contentService","jsx","_jsx","jsxs","_jsxs","VisualEditor","pageName","navigate","pageData","setPageData","editingElement","setEditingElement","isEditMode","setIsEditMode","loading","setLoading","showImageUploader","setShowImageUploader","loadPageData","response","getContent","data","content","title","concat","error","console","handleElementClick","elementId","handleContentUpdate","newContent","prev","_objectSpread","handleImageInsert","imageHtml","savePage","updateContent","alert","className","children","onToggleEditMode","onSave","onExit","onAddImage","onInsert","onClose","isEditing","onEditStart","onCancel","tag"],"sources":["/Users/ivanisenko/Desktop/Narnia/робота/Не закінчені проекти/Мама проект школа/-Antares-/Frontend/src/components/visual-editor/VisualEditor.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport EditableElement from './EditableElement';\nimport EditorToolbar from './EditorToolbar';\nimport ImageUploader from './ImageUploader';\nimport { contentService } from '../../services/contentService';\nimport './VisualEditor.css';\n\nconst VisualEditor = () => {\n  const { pageName } = useParams();\n  const navigate = useNavigate();\n  const [pageData, setPageData] = useState(null);\n  const [editingElement, setEditingElement] = useState(null);\n  const [isEditMode, setIsEditMode] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const [showImageUploader, setShowImageUploader] = useState(false);\n\n  useEffect(() => {\n    loadPageData();\n  }, [pageName]);\n\n  const loadPageData = async () => {\n    try {\n      const response = await contentService.getContent(pageName);\n      if (response.data) {\n        // Якщо дані вже є\n        if (typeof response.data.content === 'string') {\n          setPageData({\n            title: pageName,\n            content: response.data.content\n          });\n        } else {\n          setPageData(response.data);\n        }\n      } else {\n        // Створюємо шаблон\n        setPageData({\n          title: pageName,\n          content: `<h1>Сторінка ${pageName}</h1><p>Початок редагування...</p>`\n        });\n      }\n    } catch (error) {\n      console.error('Помилка завантаження:', error);\n      setPageData({\n        title: pageName,\n        content: `<h1>Сторінка ${pageName}</h1><p>Помилка завантаження. Створюємо нову сторінку...</p>`\n      });\n    }\n  };\n\n  const handleElementClick = (elementId) => {\n    if (isEditMode) {\n      setEditingElement(elementId);\n    }\n  };\n\n  const handleContentUpdate = (elementId, newContent) => {\n    setPageData(prev => ({\n      ...prev,\n      content: newContent\n    }));\n    setEditingElement(null);\n  };\n\n  const handleImageInsert = (imageHtml) => {\n    // Додаємо HTML зображення до контенту\n    setPageData(prev => ({\n      ...prev,\n      content: prev.content + imageHtml\n    }));\n    setShowImageUploader(false);\n  };\n\n  const savePage = async () => {\n    if (!pageData) return;\n    \n    setLoading(true);\n    try {\n      await contentService.updateContent(pageName, pageData);\n      alert('Сторінку збережено!');\n    } catch (error) {\n      console.error('Помилка збереження:', error);\n      alert('Помилка збереження сторінки');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!pageData) {\n    return <div className=\"loading\">Завантаження...</div>;\n  }\n\n  return (\n    <div className={`visual-editor ${isEditMode ? 'edit-mode' : 'preview-mode'}`}>\n      <EditorToolbar\n        isEditMode={isEditMode}\n        onToggleEditMode={() => setIsEditMode(!isEditMode)}\n        onSave={savePage}\n        onExit={() => navigate('/admin/dashboard')}\n        onAddImage={() => setShowImageUploader(true)}\n        loading={loading}\n      />\n\n      {showImageUploader && (\n        <ImageUploader\n          onInsert={handleImageInsert}\n          onClose={() => setShowImageUploader(false)}\n        />\n      )}\n\n      <div className=\"editor-container\">\n        <EditableElement\n          elementId=\"page-content\"\n          content={pageData.content}\n          isEditing={editingElement === 'page-content'}\n          onEditStart={() => handleElementClick('page-content')}\n          onSave={(content) => handleContentUpdate('page-content', content)}\n          onCancel={() => setEditingElement(null)}\n          tag=\"div\"\n          className=\"page-content-editor\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default VisualEditor;"],"mappings":"yXAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,eAAe,KAAM,mBAAmB,CAC/C,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,OAASC,cAAc,KAAQ,+BAA+B,CAC9D,MAAO,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5B,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAEC,QAAS,CAAC,CAAGX,SAAS,CAAC,CAAC,CAChC,KAAM,CAAAY,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACiB,cAAc,CAAEC,iBAAiB,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAACmB,UAAU,CAAEC,aAAa,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAClD,KAAM,CAACqB,OAAO,CAAEC,UAAU,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACuB,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGxB,QAAQ,CAAC,KAAK,CAAC,CAEjEC,SAAS,CAAC,IAAM,CACdwB,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACZ,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAY,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAnB,cAAc,CAACoB,UAAU,CAACd,QAAQ,CAAC,CAC1D,GAAIa,QAAQ,CAACE,IAAI,CAAE,CACjB;AACA,GAAI,MAAO,CAAAF,QAAQ,CAACE,IAAI,CAACC,OAAO,GAAK,QAAQ,CAAE,CAC7Cb,WAAW,CAAC,CACVc,KAAK,CAAEjB,QAAQ,CACfgB,OAAO,CAAEH,QAAQ,CAACE,IAAI,CAACC,OACzB,CAAC,CAAC,CACJ,CAAC,IAAM,CACLb,WAAW,CAACU,QAAQ,CAACE,IAAI,CAAC,CAC5B,CACF,CAAC,IAAM,CACL;AACAZ,WAAW,CAAC,CACVc,KAAK,CAAEjB,QAAQ,CACfgB,OAAO,yDAAAE,MAAA,CAAkBlB,QAAQ,gIACnC,CAAC,CAAC,CACJ,CACF,CAAE,MAAOmB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7ChB,WAAW,CAAC,CACVc,KAAK,CAAEjB,QAAQ,CACfgB,OAAO,yDAAAE,MAAA,CAAkBlB,QAAQ,wQACnC,CAAC,CAAC,CACJ,CACF,CAAC,CAED,KAAM,CAAAqB,kBAAkB,CAAIC,SAAS,EAAK,CACxC,GAAIhB,UAAU,CAAE,CACdD,iBAAiB,CAACiB,SAAS,CAAC,CAC9B,CACF,CAAC,CAED,KAAM,CAAAC,mBAAmB,CAAGA,CAACD,SAAS,CAAEE,UAAU,GAAK,CACrDrB,WAAW,CAACsB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACXD,IAAI,MACPT,OAAO,CAAEQ,UAAU,EACnB,CAAC,CACHnB,iBAAiB,CAAC,IAAI,CAAC,CACzB,CAAC,CAED,KAAM,CAAAsB,iBAAiB,CAAIC,SAAS,EAAK,CACvC;AACAzB,WAAW,CAACsB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACXD,IAAI,MACPT,OAAO,CAAES,IAAI,CAACT,OAAO,CAAGY,SAAS,EACjC,CAAC,CACHjB,oBAAoB,CAAC,KAAK,CAAC,CAC7B,CAAC,CAED,KAAM,CAAAkB,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CAAC3B,QAAQ,CAAE,OAEfO,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAf,cAAc,CAACoC,aAAa,CAAC9B,QAAQ,CAAEE,QAAQ,CAAC,CACtD6B,KAAK,CAAC,qBAAqB,CAAC,CAC9B,CAAE,MAAOZ,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3CY,KAAK,CAAC,6BAA6B,CAAC,CACtC,CAAC,OAAS,CACRtB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAI,CAACP,QAAQ,CAAE,CACb,mBAAON,IAAA,QAAKoC,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,6EAAe,CAAK,CAAC,CACvD,CAEA,mBACEnC,KAAA,QAAKkC,SAAS,kBAAAd,MAAA,CAAmBZ,UAAU,CAAG,WAAW,CAAG,cAAc,CAAG,CAAA2B,QAAA,eAC3ErC,IAAA,CAACJ,aAAa,EACZc,UAAU,CAAEA,UAAW,CACvB4B,gBAAgB,CAAEA,CAAA,GAAM3B,aAAa,CAAC,CAACD,UAAU,CAAE,CACnD6B,MAAM,CAAEN,QAAS,CACjBO,MAAM,CAAEA,CAAA,GAAMnC,QAAQ,CAAC,kBAAkB,CAAE,CAC3CoC,UAAU,CAAEA,CAAA,GAAM1B,oBAAoB,CAAC,IAAI,CAAE,CAC7CH,OAAO,CAAEA,OAAQ,CAClB,CAAC,CAEDE,iBAAiB,eAChBd,IAAA,CAACH,aAAa,EACZ6C,QAAQ,CAAEX,iBAAkB,CAC5BY,OAAO,CAAEA,CAAA,GAAM5B,oBAAoB,CAAC,KAAK,CAAE,CAC5C,CACF,cAEDf,IAAA,QAAKoC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/BrC,IAAA,CAACL,eAAe,EACd+B,SAAS,CAAC,cAAc,CACxBN,OAAO,CAAEd,QAAQ,CAACc,OAAQ,CAC1BwB,SAAS,CAAEpC,cAAc,GAAK,cAAe,CAC7CqC,WAAW,CAAEA,CAAA,GAAMpB,kBAAkB,CAAC,cAAc,CAAE,CACtDc,MAAM,CAAGnB,OAAO,EAAKO,mBAAmB,CAAC,cAAc,CAAEP,OAAO,CAAE,CAClE0B,QAAQ,CAAEA,CAAA,GAAMrC,iBAAiB,CAAC,IAAI,CAAE,CACxCsC,GAAG,CAAC,KAAK,CACTX,SAAS,CAAC,qBAAqB,CAChC,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAjC,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}