{"ast":null,"code":"import api from'./api';// –í–∏–¥–∞–ª—è—î–º–æ —ñ–º–ø–æ—Ä—Ç bcrypt - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω —Ö–µ—à—É–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—å\nclass AuthService{constructor(){this.token=localStorage.getItem('authToken');this.user=JSON.parse(localStorage.getItem('user')||'null');}async login(email,password){try{console.log('üîÑ Attempting login with:',{email,password});// –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –ø–∞—Ä–æ–ª—å —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ - –±–µ–∫–µ–Ω–¥ —Å–∞–º –π–æ–≥–æ —Ö–µ—à—É—î\nconst response=await api.post('/auth/login',{email:email,password:password// –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å, –Ω–µ —Ö–µ—à\n});console.log('‚úÖ Login response:',response.data);if(response.data.success&&response.data.token){this.token=response.data.token;this.user=response.data.user;// –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ localStorage\nlocalStorage.setItem('authToken',this.token);localStorage.setItem('user',JSON.stringify(this.user));window.dispatchEvent(new Event('authChange'));// –î–æ–¥–∞—î–º–æ —Ç–æ–∫–µ–Ω –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤\napi.defaults.headers.common['Authorization']=\"Bearer \".concat(this.token);return response.data;}else{throw new Error(response.data.message||'–ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó');}}catch(error){console.error('‚ùå Auth service login error:',error);// –ë—ñ–ª—å—à —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫\nif(error.response){// –°–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä–Ω—É–≤ –ø–æ–º–∏–ª–∫—É\nconst message=error.response.data.message||'–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞';throw new Error(message);}else if(error.request){// –ó–∞–ø–∏—Ç –±—É–≤ –∑—Ä–æ–±–ª–µ–Ω–∏–π, –∞–ª–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–æ\nthrow new Error('–ù–µ–º–∞—î –∑–≤\\'—è–∑–∫—É –∑ —Å–µ—Ä–≤–µ—Ä–æ–º');}else{// –©–æ—Å—å —Å—Ç–∞–ª–æ—Å—è –ø—ñ–¥ —á–∞—Å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É\nthrow new Error('–ü–æ–º–∏–ª–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É');}}}// –í–∏–¥–∞–ª—è—î–º–æ –º–µ—Ç–æ–¥ comparePasswords, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –±—ñ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω\nlogout(){this.token=null;this.user=null;localStorage.removeItem('authToken');localStorage.removeItem('user');delete api.defaults.headers.common['Authorization'];console.log('‚úÖ User logged out');}isAuthenticated(){const hasToken=!!this.token;const hasUser=!!this.user;console.log('üîê Auth check:',{hasToken,hasUser,user:this.user});return hasToken&&hasUser;}getUser(){return this.user;}getToken(){return this.token;}// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ —Ç–æ–∫–µ–Ω –¥—ñ–π—Å–Ω–∏–π\nasync verifyToken(){try{if(!this.token){return false;}const response=await api.get('/auth/verify');return response.data.success;}catch(error){console.error('‚ùå Token verification failed:',error);this.logout();return false;}}}export const authService=new AuthService();export default authService;","map":{"version":3,"names":["api","AuthService","constructor","token","localStorage","getItem","user","JSON","parse","login","email","password","console","log","response","post","data","success","setItem","stringify","window","dispatchEvent","Event","defaults","headers","common","concat","Error","message","error","request","logout","removeItem","isAuthenticated","hasToken","hasUser","getUser","getToken","verifyToken","get","authService"],"sources":["/Users/ivanisenko/Desktop/Narnia/—Ä–æ–±–æ—Ç–∞/–ù–µ –∑–∞–∫—ñ–Ω—á–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç–∏/–ú–∞–º–∞ –ø—Ä–æ–µ–∫—Ç —à–∫–æ–ª–∞/-Antares-/Frontend/src/services/authService.js"],"sourcesContent":["import api from './api';\n// –í–∏–¥–∞–ª—è—î–º–æ —ñ–º–ø–æ—Ä—Ç bcrypt - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω —Ö–µ—à—É–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—å\n\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem('authToken');\n    this.user = JSON.parse(localStorage.getItem('user') || 'null');\n  }\n\n  async login(email, password) {\n    try {\n      console.log('üîÑ Attempting login with:', { email, password });\n      \n      // –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –ø–∞—Ä–æ–ª—å —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ - –±–µ–∫–µ–Ω–¥ —Å–∞–º –π–æ–≥–æ —Ö–µ—à—É—î\n      const response = await api.post('/auth/login', {\n        email: email,\n        password: password // –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å, –Ω–µ —Ö–µ—à\n      });\n\n      console.log('‚úÖ Login response:', response.data);\n\n      if (response.data.success && response.data.token) {\n        this.token = response.data.token;\n        this.user = response.data.user;\n        \n        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ localStorage\n        localStorage.setItem('authToken', this.token);\n        localStorage.setItem('user', JSON.stringify(this.user));\n        window.dispatchEvent(new Event('authChange'));\n        \n        // –î–æ–¥–∞—î–º–æ —Ç–æ–∫–µ–Ω –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤\n        api.defaults.headers.common['Authorization'] = `Bearer ${this.token}`;\n        \n        return response.data;\n      } else {\n        throw new Error(response.data.message || '–ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó');\n      }\n    } catch (error) {\n      console.error('‚ùå Auth service login error:', error);\n      \n      // –ë—ñ–ª—å—à —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫\n      if (error.response) {\n        // –°–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä–Ω—É–≤ –ø–æ–º–∏–ª–∫—É\n        const message = error.response.data.message || '–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞';\n        throw new Error(message);\n      } else if (error.request) {\n        // –ó–∞–ø–∏—Ç –±—É–≤ –∑—Ä–æ–±–ª–µ–Ω–∏–π, –∞–ª–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–æ\n        throw new Error('–ù–µ–º–∞—î –∑–≤\\'—è–∑–∫—É –∑ —Å–µ—Ä–≤–µ—Ä–æ–º');\n      } else {\n        // –©–æ—Å—å —Å—Ç–∞–ª–æ—Å—è –ø—ñ–¥ —á–∞—Å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É\n        throw new Error('–ü–æ–º–∏–ª–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É');\n      }\n    }\n  }\n\n  // –í–∏–¥–∞–ª—è—î–º–æ –º–µ—Ç–æ–¥ comparePasswords, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –±—ñ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω\n\n  logout() {\n    this.token = null;\n    this.user = null;\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('user');\n    delete api.defaults.headers.common['Authorization'];\n    console.log('‚úÖ User logged out');\n  }\n\n  isAuthenticated() {\n    const hasToken = !!this.token;\n    const hasUser = !!this.user;\n    console.log('üîê Auth check:', { hasToken, hasUser, user: this.user });\n    return hasToken && hasUser;\n  }\n\n  getUser() {\n    return this.user;\n  }\n\n  getToken() {\n    return this.token;\n  }\n\n  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ —Ç–æ–∫–µ–Ω –¥—ñ–π—Å–Ω–∏–π\n  async verifyToken() {\n    try {\n      if (!this.token) {\n        return false;\n      }\n      \n      const response = await api.get('/auth/verify');\n      return response.data.success;\n    } catch (error) {\n      console.error('‚ùå Token verification failed:', error);\n      this.logout();\n      return false;\n    }\n  }\n}\n\nexport const authService = new AuthService();\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}