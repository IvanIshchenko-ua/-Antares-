{"ast":null,"code":"import api from './api';\nconst galleryService = {\n  // –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ —Ñ–æ—Ç–æ –≥–∞–ª–µ—Ä–µ—ó\n  getGalleryImages: async () => {\n    try {\n      console.log('üîß Making GET request to /gallery');\n      const response = await api.get('/gallery');\n      console.log('üîß GET /gallery response:', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ñ–æ—Ç–æ:', error);\n      return {\n        images: []\n      };\n    }\n  },\n  // –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–æ–≤–µ —Ñ–æ—Ç–æ –≤ R2\n  uploadGalleryImage: async formData => {\n    try {\n      console.log('üîß Starting R2 upload process...');\n\n      // 1. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ñ–∞–π–ª –≤ R2\n      console.log('üîß Step 1: Uploading file to R2');\n      const uploadResponse = await api.post('/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      console.log('üîß R2 upload response:', uploadResponse.data);\n      if (!uploadResponse.data.success) {\n        throw new Error('R2 upload failed');\n      }\n\n      // 2. –°—Ç–≤–æ—Ä—é—î–º–æ –∑–∞–ø–∏—Å –≤ –≥–∞–ª–µ—Ä–µ—ó\n      console.log('üîß Step 2: Creating gallery record');\n      const imageData = {\n        title: formData.get('title'),\n        description: formData.get('description'),\n        image_url: uploadResponse.data.url,\n        category: formData.get('category'),\n        filename: uploadResponse.data.filename // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —ñ–º'—è —Ñ–∞–π–ª—É –¥–ª—è –º–æ–∂–ª–∏–≤–æ–≥–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è\n      };\n      console.log('üîß Gallery data to send:', imageData);\n      const galleryResponse = await api.post('/gallery', imageData);\n      console.log('üîß Gallery creation response:', galleryResponse.data);\n      return galleryResponse.data;\n    } catch (error) {\n      console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ R2:', error);\n      throw error;\n    }\n  },\n  // –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è\n  createGalleryImage: async imageData => {\n    try {\n      console.log('üîß Creating gallery image from URL:', imageData);\n      const response = await api.post('/gallery', imageData);\n      console.log('üîß Gallery creation response:', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–æ—Ç–æ –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:', error);\n      throw error;\n    }\n  },\n  // –í–∏–¥–∞–ª–∏—Ç–∏ —Ñ–æ—Ç–æ (–∑ R2 —Ç–∞ –∑ –±–∞–∑–∏)\n  deleteGalleryImage: async (imageId, filename = null) => {\n    try {\n      // –°–ø–æ—á–∞—Ç–∫—É –≤–∏–¥–∞–ª—è—î–º–æ –∑ –±–∞–∑–∏\n      const response = await api.delete(`/gallery/${imageId}`);\n\n      // –Ø–∫—â–æ —î filename, –≤–∏–¥–∞–ª—è—î–º–æ —Ñ–∞–π–ª –∑ R2\n      if (filename) {\n        try {\n          await api.delete(`/upload/${filename}`);\n          console.log('‚úÖ File deleted from R2:', filename);\n        } catch (r2Error) {\n          console.error('‚ùå Error deleting from R2:', r2Error);\n          // –ü—Ä–æ–¥–æ–≤–∂—É—î–º–æ, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –Ω–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–¥–∞–ª–∏—Ç–∏ –∑ R2\n        }\n      }\n      return response.data;\n    } catch (error) {\n      console.error('–ü–æ–º–∏–ª–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–æ—Ç–æ:', error);\n      throw error;\n    }\n  }\n};\nexport default galleryService;","map":{"version":3,"names":["api","galleryService","getGalleryImages","console","log","response","get","data","error","images","uploadGalleryImage","formData","uploadResponse","post","headers","success","Error","imageData","title","description","image_url","url","category","filename","galleryResponse","createGalleryImage","deleteGalleryImage","imageId","delete","r2Error"],"sources":["/Users/ivanisenko/Desktop/Narnia/—Ä–æ–±–æ—Ç–∞/–ù–µ –∑–∞–∫—ñ–Ω—á–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç–∏/–ú–∞–º–∞ –ø—Ä–æ–µ–∫—Ç —à–∫–æ–ª–∞/-Antares-/Frontend/src/services/galleryService.js"],"sourcesContent":["import api from './api';\n\nconst galleryService = {\n  // –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ —Ñ–æ—Ç–æ –≥–∞–ª–µ—Ä–µ—ó\n  getGalleryImages: async () => {\n    try {\n      console.log('üîß Making GET request to /gallery');\n      const response = await api.get('/gallery');\n      console.log('üîß GET /gallery response:', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ñ–æ—Ç–æ:', error);\n      return { images: [] };\n    }\n  },\n\n  // –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–æ–≤–µ —Ñ–æ—Ç–æ –≤ R2\n  uploadGalleryImage: async (formData) => {\n    try {\n      console.log('üîß Starting R2 upload process...');\n      \n      // 1. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ñ–∞–π–ª –≤ R2\n      console.log('üîß Step 1: Uploading file to R2');\n      const uploadResponse = await api.post('/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      console.log('üîß R2 upload response:', uploadResponse.data);\n\n      if (!uploadResponse.data.success) {\n        throw new Error('R2 upload failed');\n      }\n\n      // 2. –°—Ç–≤–æ—Ä—é—î–º–æ –∑–∞–ø–∏—Å –≤ –≥–∞–ª–µ—Ä–µ—ó\n      console.log('üîß Step 2: Creating gallery record');\n      const imageData = {\n        title: formData.get('title'),\n        description: formData.get('description'),\n        image_url: uploadResponse.data.url,\n        category: formData.get('category'),\n        filename: uploadResponse.data.filename // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —ñ–º'—è —Ñ–∞–π–ª—É –¥–ª—è –º–æ–∂–ª–∏–≤–æ–≥–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è\n      };\n\n      console.log('üîß Gallery data to send:', imageData);\n      \n      const galleryResponse = await api.post('/gallery', imageData);\n      console.log('üîß Gallery creation response:', galleryResponse.data);\n      \n      return galleryResponse.data;\n    } catch (error) {\n      console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ R2:', error);\n      throw error;\n    }\n  },\n\n  // –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è\n  createGalleryImage: async (imageData) => {\n    try {\n      console.log('üîß Creating gallery image from URL:', imageData);\n      const response = await api.post('/gallery', imageData);\n      console.log('üîß Gallery creation response:', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–æ—Ç–æ –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:', error);\n      throw error;\n    }\n  },\n\n  // –í–∏–¥–∞–ª–∏—Ç–∏ —Ñ–æ—Ç–æ (–∑ R2 —Ç–∞ –∑ –±–∞–∑–∏)\n  deleteGalleryImage: async (imageId, filename = null) => {\n    try {\n      // –°–ø–æ—á–∞—Ç–∫—É –≤–∏–¥–∞–ª—è—î–º–æ –∑ –±–∞–∑–∏\n      const response = await api.delete(`/gallery/${imageId}`);\n      \n      // –Ø–∫—â–æ —î filename, –≤–∏–¥–∞–ª—è—î–º–æ —Ñ–∞–π–ª –∑ R2\n      if (filename) {\n        try {\n          await api.delete(`/upload/${filename}`);\n          console.log('‚úÖ File deleted from R2:', filename);\n        } catch (r2Error) {\n          console.error('‚ùå Error deleting from R2:', r2Error);\n          // –ü—Ä–æ–¥–æ–≤–∂—É—î–º–æ, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –Ω–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–¥–∞–ª–∏—Ç–∏ –∑ R2\n        }\n      }\n      \n      return response.data;\n    } catch (error) {\n      console.error('–ü–æ–º–∏–ª–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–æ—Ç–æ:', error);\n      throw error;\n    }\n  }\n};\n\nexport default galleryService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}