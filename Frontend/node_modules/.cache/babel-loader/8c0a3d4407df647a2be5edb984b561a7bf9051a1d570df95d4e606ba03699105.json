{"ast":null,"code":"import api from './api';\nimport bcrypt from 'bcryptjs';\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem('authToken');\n    this.user = JSON.parse(localStorage.getItem('user') || 'null');\n  }\n  async login(email, password) {\n    try {\n      console.log('üîÑ Attempting login with:', {\n        email,\n        password\n      });\n\n      // –•–µ—à—É—î–º–æ –ø–∞—Ä–æ–ª—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ\n      const saltRounds = 10;\n      const hashedPassword = await bcrypt.hash(password, saltRounds);\n      console.log('üîë Frontend hashed password:', hashedPassword);\n      const response = await api.post('/auth/login', {\n        email: email,\n        password: hashedPassword // –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –∑–∞—Ö–µ—à–æ–≤–∞–Ω–∏–π –ø–∞—Ä–æ–ª—å\n      });\n      console.log('‚úÖ Login response:', response.data);\n      if (response.data.success && response.data.token) {\n        this.token = response.data.token;\n        this.user = response.data.user;\n\n        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ localStorage\n        localStorage.setItem('authToken', this.token);\n        localStorage.setItem('user', JSON.stringify(this.user));\n\n        // –î–æ–¥–∞—î–º–æ —Ç–æ–∫–µ–Ω –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤\n        api.defaults.headers.common['Authorization'] = `Bearer ${this.token}`;\n        return response.data;\n      } else {\n        throw new Error(response.data.message || '–ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó');\n      }\n    } catch (error) {\n      console.error('‚ùå Auth service login error:', error);\n\n      // –ë—ñ–ª—å—à —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫\n      if (error.response) {\n        // –°–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä–Ω—É–≤ –ø–æ–º–∏–ª–∫—É\n        const message = error.response.data.message || '–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞';\n        throw new Error(message);\n      } else if (error.request) {\n        // –ó–∞–ø–∏—Ç –±—É–≤ –∑—Ä–æ–±–ª–µ–Ω–∏–π, –∞–ª–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–æ\n        throw new Error('–ù–µ–º–∞—î –∑–≤\\'—è–∑–∫—É –∑ —Å–µ—Ä–≤–µ—Ä–æ–º');\n      } else {\n        // –©–æ—Å—å —Å—Ç–∞–ª–æ—Å—è –ø—ñ–¥ —á–∞—Å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É\n        throw new Error('–ü–æ–º–∏–ª–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É');\n      }\n    }\n  }\n\n  // –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ (–º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—å –¥–ª—è —ñ–Ω—à–∏—Ö —Ü—ñ–ª–µ–π)\n  async comparePasswords(plainPassword, hashedPassword) {\n    return await bcrypt.compare(plainPassword, hashedPassword);\n  }\n  logout() {\n    this.token = null;\n    this.user = null;\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('user');\n    delete api.defaults.headers.common['Authorization'];\n    console.log('‚úÖ User logged out');\n  }\n  isAuthenticated() {\n    const hasToken = !!this.token;\n    const hasUser = !!this.user;\n    console.log('üîê Auth check:', {\n      hasToken,\n      hasUser,\n      user: this.user\n    });\n    return hasToken && hasUser;\n  }\n  getUser() {\n    return this.user;\n  }\n  getToken() {\n    return this.token;\n  }\n\n  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ —Ç–æ–∫–µ–Ω –¥—ñ–π—Å–Ω–∏–π\n  async verifyToken() {\n    try {\n      if (!this.token) {\n        return false;\n      }\n      const response = await api.get('/auth/verify');\n      return response.data.success;\n    } catch (error) {\n      console.error('‚ùå Token verification failed:', error);\n      this.logout();\n      return false;\n    }\n  }\n}\nexport const authService = new AuthService();\nexport default authService;","map":{"version":3,"names":["api","bcrypt","AuthService","constructor","token","localStorage","getItem","user","JSON","parse","login","email","password","console","log","saltRounds","hashedPassword","hash","response","post","data","success","setItem","stringify","defaults","headers","common","Error","message","error","request","comparePasswords","plainPassword","compare","logout","removeItem","isAuthenticated","hasToken","hasUser","getUser","getToken","verifyToken","get","authService"],"sources":["/Users/ivanisenko/Desktop/Narnia/—Ä–æ–±–æ—Ç–∞/–ù–µ –∑–∞–∫—ñ–Ω—á–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç–∏/–ú–∞–º–∞ –ø—Ä–æ–µ–∫—Ç —à–∫–æ–ª–∞/-Antares-/Frontend/src/services/authService.js"],"sourcesContent":["import api from './api';\nimport bcrypt from 'bcryptjs';\n\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem('authToken');\n    this.user = JSON.parse(localStorage.getItem('user') || 'null');\n  }\n\n  async login(email, password) {\n    try {\n      console.log('üîÑ Attempting login with:', { email, password });\n      \n      // –•–µ—à—É—î–º–æ –ø–∞—Ä–æ–ª—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ\n      const saltRounds = 10;\n      const hashedPassword = await bcrypt.hash(password, saltRounds);\n      \n      console.log('üîë Frontend hashed password:', hashedPassword);\n\n      const response = await api.post('/auth/login', {\n        email: email,\n        password: hashedPassword // –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –∑–∞—Ö–µ—à–æ–≤–∞–Ω–∏–π –ø–∞—Ä–æ–ª—å\n      });\n\n      console.log('‚úÖ Login response:', response.data);\n\n      if (response.data.success && response.data.token) {\n        this.token = response.data.token;\n        this.user = response.data.user;\n        \n        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ localStorage\n        localStorage.setItem('authToken', this.token);\n        localStorage.setItem('user', JSON.stringify(this.user));\n        \n        // –î–æ–¥–∞—î–º–æ —Ç–æ–∫–µ–Ω –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤\n        api.defaults.headers.common['Authorization'] = `Bearer ${this.token}`;\n        \n        return response.data;\n      } else {\n        throw new Error(response.data.message || '–ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó');\n      }\n    } catch (error) {\n      console.error('‚ùå Auth service login error:', error);\n      \n      // –ë—ñ–ª—å—à —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫\n      if (error.response) {\n        // –°–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä–Ω—É–≤ –ø–æ–º–∏–ª–∫—É\n        const message = error.response.data.message || '–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞';\n        throw new Error(message);\n      } else if (error.request) {\n        // –ó–∞–ø–∏—Ç –±—É–≤ –∑—Ä–æ–±–ª–µ–Ω–∏–π, –∞–ª–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–æ\n        throw new Error('–ù–µ–º–∞—î –∑–≤\\'—è–∑–∫—É –∑ —Å–µ—Ä–≤–µ—Ä–æ–º');\n      } else {\n        // –©–æ—Å—å —Å—Ç–∞–ª–æ—Å—è –ø—ñ–¥ —á–∞—Å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É\n        throw new Error('–ü–æ–º–∏–ª–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É');\n      }\n    }\n  }\n\n  // –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ (–º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—å –¥–ª—è —ñ–Ω—à–∏—Ö —Ü—ñ–ª–µ–π)\n  async comparePasswords(plainPassword, hashedPassword) {\n    return await bcrypt.compare(plainPassword, hashedPassword);\n  }\n\n  logout() {\n    this.token = null;\n    this.user = null;\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('user');\n    delete api.defaults.headers.common['Authorization'];\n    console.log('‚úÖ User logged out');\n  }\n\n  isAuthenticated() {\n    const hasToken = !!this.token;\n    const hasUser = !!this.user;\n    console.log('üîê Auth check:', { hasToken, hasUser, user: this.user });\n    return hasToken && hasUser;\n  }\n\n  getUser() {\n    return this.user;\n  }\n\n  getToken() {\n    return this.token;\n  }\n\n  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ —Ç–æ–∫–µ–Ω –¥—ñ–π—Å–Ω–∏–π\n  async verifyToken() {\n    try {\n      if (!this.token) {\n        return false;\n      }\n      \n      const response = await api.get('/auth/verify');\n      return response.data.success;\n    } catch (error) {\n      console.error('‚ùå Token verification failed:', error);\n      this.logout();\n      return false;\n    }\n  }\n}\n\nexport const authService = new AuthService();\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}