{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import Login from'./components/auth/Login';import Dashboard from'./components/dashboard/Dashboard';import Editor from'./components/editor/Editor';import VisualEditor from'./components/visual-editor/VisualEditor';import SitePage,{NewsPage}from'./components/site/SitePage';import NewsManagement from'./components/admin/NewsManagement';import NewsEditor from'./components/admin/NewsEditor';import GalleryManagement from'./components/admin/GalleryManagement';import TransparencyManagement from'./components/admin/TransparencyManagement';// Додано\nimport{authService}from'./services/authService';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(null);useEffect(()=>{const checkAuth=()=>{const authenticated=authService.isAuthenticated();setIsAuthenticated(authenticated);};checkAuth();// первинна перевірка\nwindow.addEventListener('authChange',checkAuth);// ✅ слухає оновлення\nreturn()=>{window.removeEventListener('authChange',checkAuth);};},[]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/site/:pageName\",element:/*#__PURE__*/_jsx(SitePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/site\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/site/home\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/site/news/:id\",element:/*#__PURE__*/_jsx(NewsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!isAuthenticated?/*#__PURE__*/_jsx(Login,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/admin/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/*\",element:isAuthenticated?/*#__PURE__*/_jsx(AdminLayout,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/site/home\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]})})});}const AdminLayout=()=>{const handleLogout=()=>{authService.logout();window.location.href='/login';};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"header\",{style:{backgroundColor:'#20324cff',color:'white',padding:'1rem 2rem',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:0,fontSize:'1.5rem',color:'white'},children:\"\\u0410\\u0434\\u043C\\u0456\\u043D-\\u043F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0448\\u043A\\u043E\\u043B\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{backgroundColor:'#ef4444',color:'white',border:'none',padding:'0.5rem 1rem',borderRadius:'4px',cursor:'pointer'},children:\"\\u0412\\u0438\\u0439\\u0442\\u0438\"})})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"editor/:pageName\",element:/*#__PURE__*/_jsx(Editor,{})}),/*#__PURE__*/_jsx(Route,{path:\"visual-editor/:pageName\",element:/*#__PURE__*/_jsx(VisualEditor,{})}),/*#__PURE__*/_jsx(Route,{path:\"news\",element:/*#__PURE__*/_jsx(NewsManagement,{})}),/*#__PURE__*/_jsx(Route,{path:\"news/create\",element:/*#__PURE__*/_jsx(NewsEditor,{})}),/*#__PURE__*/_jsx(Route,{path:\"news/edit/:id\",element:/*#__PURE__*/_jsx(NewsEditor,{})}),/*#__PURE__*/_jsx(Route,{path:\"gallery-management\",element:/*#__PURE__*/_jsx(GalleryManagement,{})}),/*#__PURE__*/_jsx(Route,{path:\"transparency\",element:/*#__PURE__*/_jsx(TransparencyManagement,{})}),/*#__PURE__*/_jsx(Route,{path:\"\",element:/*#__PURE__*/_jsx(Navigate,{to:\"dashboard\",replace:true})})]})]});};const NotFound=()=>{return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',flexDirection:'column',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'3rem',color:'#2c3e50',marginBottom:'1rem'},children:\"404\"}),/*#__PURE__*/_jsx(\"h2\",{style:{color:'#7f8c8d',marginBottom:'2rem'},children:\"\\u0421\\u0442\\u043E\\u0440\\u0456\\u043D\\u043A\\u0443 \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"a\",{href:\"/site/home\",style:{backgroundColor:'#4AAFF7',color:'white',padding:'0.75rem 1.5rem',textDecoration:'none',borderRadius:'5px',fontWeight:'bold'},children:\"\\u041D\\u0430 \\u0433\\u043E\\u043B\\u043E\\u0432\\u043D\\u0443\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/admin/dashboard\",style:{backgroundColor:'#9b59b6',color:'white',padding:'0.75rem 1.5rem',textDecoration:'none',borderRadius:'5px',fontWeight:'bold'},children:\"\\u0412 \\u0430\\u0434\\u043C\\u0456\\u043D\\u043A\\u0443\"})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Login","Dashboard","Editor","VisualEditor","SitePage","NewsPage","NewsManagement","NewsEditor","GalleryManagement","TransparencyManagement","authService","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","checkAuth","authenticated","window","addEventListener","removeEventListener","children","className","path","element","to","replace","AdminLayout","NotFound","handleLogout","logout","location","href","style","backgroundColor","color","padding","display","justifyContent","alignItems","margin","fontSize","onClick","border","borderRadius","cursor","height","flexDirection","textAlign","marginBottom","gap","textDecoration","fontWeight"],"sources":["/Users/ivanisenko/Desktop/Narnia/робота/Не закінчені проекти/Мама проект школа/-Antares-/Frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport Login from './components/auth/Login';\nimport Dashboard from './components/dashboard/Dashboard';\nimport Editor from './components/editor/Editor';\nimport VisualEditor from './components/visual-editor/VisualEditor';\nimport SitePage, { NewsPage } from './components/site/SitePage';\nimport NewsManagement from './components/admin/NewsManagement';\nimport NewsEditor from './components/admin/NewsEditor';\nimport GalleryManagement from './components/admin/GalleryManagement';\nimport TransparencyManagement from './components/admin/TransparencyManagement'; // Додано\nimport { authService } from './services/authService';\nimport './App.css';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\n\nuseEffect(() => {\n  const checkAuth = () => {\n    const authenticated = authService.isAuthenticated();\n    setIsAuthenticated(authenticated);\n  };\n\n  checkAuth(); // первинна перевірка\n  window.addEventListener('authChange', checkAuth); // ✅ слухає оновлення\n\n  return () => {\n    window.removeEventListener('authChange', checkAuth);\n  };\n}, []);\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Routes>\n          {/* Публічні маршрути */}\n          <Route path=\"/site/:pageName\" element={<SitePage />} />\n          <Route path=\"/site\" element={<Navigate to=\"/site/home\" replace />} />\n          \n          {/* Окремий маршрут для новин з ID */}\n          <Route path=\"/site/news/:id\" element={<NewsPage />} />\n          \n          {/* Адмін-маршрути */}\n          <Route \n            path=\"/login\" \n            element={!isAuthenticated ? <Login /> : <Navigate to=\"/admin/dashboard\" replace />} \n          />\n          <Route \n            path=\"/admin/*\" \n            element={isAuthenticated ? <AdminLayout /> : <Navigate to=\"/login\" replace />} \n          />\n          \n          <Route path=\"/\" element={<Navigate to=\"/site/home\" replace />} />\n          <Route path=\"*\" element={<NotFound />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nconst AdminLayout = () => {\n  const handleLogout = () => {\n    authService.logout();\n    window.location.href = '/login';\n  };\n\n  return (\n    <div>\n      <header style={{\n        backgroundColor: '#20324cff',\n        color: 'white',\n        padding: '1rem 2rem',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      }}>\n        <h1 style={{ margin: 0, fontSize: '1.5rem', color: 'white' }}>Адмін-панель школи</h1>\n        <div>\n          <button\n            onClick={handleLogout}\n            style={{\n              backgroundColor: '#ef4444',\n              color: 'white',\n              border: 'none',\n              padding: '0.5rem 1rem',\n              borderRadius: '4px',\n              cursor: 'pointer'\n            }}\n          >\n            Вийти\n          </button>\n        </div>\n      </header>\n      \n      <Routes>\n        <Route path=\"dashboard\" element={<Dashboard />} />\n        <Route path=\"editor/:pageName\" element={<Editor />} />\n        <Route path=\"visual-editor/:pageName\" element={<VisualEditor />} />\n        \n        {/* Маршрути для управління новинами */}\n        <Route path=\"news\" element={<NewsManagement />} />\n        <Route path=\"news/create\" element={<NewsEditor />} />\n        <Route path=\"news/edit/:id\" element={<NewsEditor />} />\n        \n        {/* Маршрут для управління галереєю */}\n        <Route path=\"gallery-management\" element={<GalleryManagement />} />\n        \n        {/* Маршрут для управління прозорістю */}\n        <Route path=\"transparency\" element={<TransparencyManagement />} />\n        \n        <Route path=\"\" element={<Navigate to=\"dashboard\" replace />} />\n      </Routes>\n    </div>\n  );\n};\n\nconst NotFound = () => {\n  return (\n    <div style={{ \n      display: 'flex', \n      justifyContent: 'center', \n      alignItems: 'center', \n      height: '100vh',\n      flexDirection: 'column',\n      textAlign: 'center'\n    }}>\n      <h1 style={{ fontSize: '3rem', color: '#2c3e50', marginBottom: '1rem' }}>404</h1>\n      <h2 style={{ color: '#7f8c8d', marginBottom: '2rem' }}>Сторінку не знайдено</h2>\n      <div style={{ display: 'flex', gap: '1rem' }}>\n        <a \n          href=\"/site/home\"\n          style={{\n            backgroundColor: '#4AAFF7',\n            color: 'white',\n            padding: '0.75rem 1.5rem',\n            textDecoration: 'none',\n            borderRadius: '5px',\n            fontWeight: 'bold'\n          }}\n        >\n          На головну\n        </a>\n        <a \n          href=\"/admin/dashboard\"\n          style={{\n            backgroundColor: '#9b59b6',\n            color: 'white',\n            padding: '0.75rem 1.5rem',\n            textDecoration: 'none',\n            borderRadius: '5px',\n            fontWeight: 'bold'\n          }}\n        >\n          В адмінку\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}