{"ast":null,"code":"import api from './api';\n// –í–∏–¥–∞–ª—è—î–º–æ —ñ–º–ø–æ—Ä—Ç bcrypt - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω —Ö–µ—à—É–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—å\n\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem('authToken');\n    this.user = JSON.parse(localStorage.getItem('user') || 'null');\n  }\n  async login(email, password) {\n    try {\n      console.log('üîÑ Attempting login with:', {\n        email,\n        password\n      });\n\n      // –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –ø–∞—Ä–æ–ª—å —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ - –±–µ–∫–µ–Ω–¥ —Å–∞–º –π–æ–≥–æ —Ö–µ—à—É—î\n      const response = await api.post('/auth/login', {\n        email: email,\n        password: password // –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å, –Ω–µ —Ö–µ—à\n      });\n      console.log('‚úÖ Login response:', response.data);\n      if (response.data.success && response.data.token) {\n        this.token = response.data.token;\n        this.user = response.data.user;\n\n        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ localStorage\n        localStorage.setItem('authToken', this.token);\n        localStorage.setItem('user', JSON.stringify(this.user));\n        window.dispatchEvent(new Event('authChange'));\n\n        // –î–æ–¥–∞—î–º–æ —Ç–æ–∫–µ–Ω –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤\n        api.defaults.headers.common['Authorization'] = `Bearer ${this.token}`;\n        return response.data;\n      } else {\n        throw new Error(response.data.message || '–ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó');\n      }\n    } catch (error) {\n      console.error('‚ùå Auth service login error:', error);\n\n      // –ë—ñ–ª—å—à —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫\n      if (error.response) {\n        // –°–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä–Ω—É–≤ –ø–æ–º–∏–ª–∫—É\n        const message = error.response.data.message || '–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞';\n        throw new Error(message);\n      } else if (error.request) {\n        // –ó–∞–ø–∏—Ç –±—É–≤ –∑—Ä–æ–±–ª–µ–Ω–∏–π, –∞–ª–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–æ\n        throw new Error('–ù–µ–º–∞—î –∑–≤\\'—è–∑–∫—É –∑ —Å–µ—Ä–≤–µ—Ä–æ–º');\n      } else {\n        // –©–æ—Å—å —Å—Ç–∞–ª–æ—Å—è –ø—ñ–¥ —á–∞—Å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É\n        throw new Error('–ü–æ–º–∏–ª–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É');\n      }\n    }\n  }\n\n  // –í–∏–¥–∞–ª—è—î–º–æ –º–µ—Ç–æ–¥ comparePasswords, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –±—ñ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω\n\n  logout() {\n    this.token = null;\n    this.user = null;\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('user');\n    delete api.defaults.headers.common['Authorization'];\n    console.log('‚úÖ User logged out');\n  }\n  isAuthenticated() {\n    const hasToken = !!this.token;\n    const hasUser = !!this.user;\n    console.log('üîê Auth check:', {\n      hasToken,\n      hasUser,\n      user: this.user\n    });\n    return hasToken && hasUser;\n  }\n  getUser() {\n    return this.user;\n  }\n  getToken() {\n    return this.token;\n  }\n\n  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ —Ç–æ–∫–µ–Ω –¥—ñ–π—Å–Ω–∏–π\n  async verifyToken() {\n    try {\n      if (!this.token) {\n        return false;\n      }\n      const response = await api.get('/auth/verify');\n      return response.data.success;\n    } catch (error) {\n      console.error('‚ùå Token verification failed:', error);\n      this.logout();\n      return false;\n    }\n  }\n}\nexport const authService = new AuthService();\nexport default authService;","map":{"version":3,"names":["api","AuthService","constructor","token","localStorage","getItem","user","JSON","parse","login","email","password","console","log","response","post","data","success","setItem","stringify","window","dispatchEvent","Event","defaults","headers","common","Error","message","error","request","logout","removeItem","isAuthenticated","hasToken","hasUser","getUser","getToken","verifyToken","get","authService"],"sources":["/Users/ivanisenko/Desktop/Narnia/—Ä–æ–±–æ—Ç–∞/–ù–µ –∑–∞–∫—ñ–Ω—á–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç–∏/–ú–∞–º–∞ –ø—Ä–æ–µ–∫—Ç —à–∫–æ–ª–∞/-Antares-/Frontend/src/services/authService.js"],"sourcesContent":["import api from './api';\n// –í–∏–¥–∞–ª—è—î–º–æ —ñ–º–ø–æ—Ä—Ç bcrypt - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω —Ö–µ—à—É–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—å\n\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem('authToken');\n    this.user = JSON.parse(localStorage.getItem('user') || 'null');\n  }\n\n  async login(email, password) {\n    try {\n      console.log('üîÑ Attempting login with:', { email, password });\n      \n      // –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –ø–∞—Ä–æ–ª—å —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ - –±–µ–∫–µ–Ω–¥ —Å–∞–º –π–æ–≥–æ —Ö–µ—à—É—î\n      const response = await api.post('/auth/login', {\n        email: email,\n        password: password // –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å, –Ω–µ —Ö–µ—à\n      });\n\n      console.log('‚úÖ Login response:', response.data);\n\n      if (response.data.success && response.data.token) {\n        this.token = response.data.token;\n        this.user = response.data.user;\n        \n        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ localStorage\n        localStorage.setItem('authToken', this.token);\n        localStorage.setItem('user', JSON.stringify(this.user));\n        window.dispatchEvent(new Event('authChange'));\n        \n        // –î–æ–¥–∞—î–º–æ —Ç–æ–∫–µ–Ω –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤\n        api.defaults.headers.common['Authorization'] = `Bearer ${this.token}`;\n        \n        return response.data;\n      } else {\n        throw new Error(response.data.message || '–ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó');\n      }\n    } catch (error) {\n      console.error('‚ùå Auth service login error:', error);\n      \n      // –ë—ñ–ª—å—à —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫\n      if (error.response) {\n        // –°–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä–Ω—É–≤ –ø–æ–º–∏–ª–∫—É\n        const message = error.response.data.message || '–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞';\n        throw new Error(message);\n      } else if (error.request) {\n        // –ó–∞–ø–∏—Ç –±—É–≤ –∑—Ä–æ–±–ª–µ–Ω–∏–π, –∞–ª–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–æ\n        throw new Error('–ù–µ–º–∞—î –∑–≤\\'—è–∑–∫—É –∑ —Å–µ—Ä–≤–µ—Ä–æ–º');\n      } else {\n        // –©–æ—Å—å —Å—Ç–∞–ª–æ—Å—è –ø—ñ–¥ —á–∞—Å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É\n        throw new Error('–ü–æ–º–∏–ª–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É');\n      }\n    }\n  }\n\n  // –í–∏–¥–∞–ª—è—î–º–æ –º–µ—Ç–æ–¥ comparePasswords, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –±—ñ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω\n\n  logout() {\n    this.token = null;\n    this.user = null;\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('user');\n    delete api.defaults.headers.common['Authorization'];\n    console.log('‚úÖ User logged out');\n  }\n\n  isAuthenticated() {\n    const hasToken = !!this.token;\n    const hasUser = !!this.user;\n    console.log('üîê Auth check:', { hasToken, hasUser, user: this.user });\n    return hasToken && hasUser;\n  }\n\n  getUser() {\n    return this.user;\n  }\n\n  getToken() {\n    return this.token;\n  }\n\n  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ —Ç–æ–∫–µ–Ω –¥—ñ–π—Å–Ω–∏–π\n  async verifyToken() {\n    try {\n      if (!this.token) {\n        return false;\n      }\n      \n      const response = await api.get('/auth/verify');\n      return response.data.success;\n    } catch (error) {\n      console.error('‚ùå Token verification failed:', error);\n      this.logout();\n      return false;\n    }\n  }\n}\n\nexport const authService = new AuthService();\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}